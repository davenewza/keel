model Person {
    fields {
        name Text
        gender Text
        niNumber Text @unique
        identity Identity?
    }

    functions {
        get getPerson(id)
        get getPersonByNINumber(niNumber)
        create createPerson() with (name, gender, niNumber)
        create createPersonWithIdentity() with (name, gender, niNumber)
        list listPeople(gender)
        delete deletePerson(id)
        update updatePerson(id) with (name, gender, niNumber)
    }

    @permission(
        expression: true,
        actions: [create, get, list, update, delete]
    )
}

model Profile {
    fields {
        person Person
    }

    functions {
        create createProfile() with (person.id)
        create createProfileWithNullPerson()
    }

    @permission(
        expression: true,
        actions: [create, get, list, update, delete]
    )
}

model Author {
    fields {
        name Text
        books Book[]
    }
}

model Book {
    fields {
        author Author
        title Text
    }

    functions {
        get getBookByAuthor(author.id)
    }
}
