model Post {
  fields {
    title Text
    published Boolean
  }
}

===

export interface API {
  models: {
    Post: PostApi

  }
}
export type PostQuery = Partial<{
  title?: QueryConstraints.StringConstraint
published?: QueryConstraints.BooleanConstraint
id?: QueryConstraints.StringConstraint
createdAt?: QueryConstraints.DateConstraint
updatedAt?: QueryConstraints.DateConstraint

}>

export class PostApi {
  private readonly db : Query<Post>;

  constructor(pool: DatabasePool) {
    this.db = new Query<Post>({
      tableName: 'post',
      pool
    })
  }

  create = (inputs: Partial<Omit<Post, "id" | "createdAt" | "updatedAt">>) : Promise<Post> => {
    return this.db.create(inputs);
  }

  where = (conditions: PostQuery) : any => {
    return this.db.where(conditions);
  }

  delete = (id: string) : Promise<boolean> => {
    return this.db.delete(id);
  }

  find = (query: PostQuery) : Promise<Post> => {
    return this.db.findOne(query);
  }

  update = (id: string, inputs: Partial<Omit<Post, "id" | "createdAt" | "updatedAt">>) : Promise<Post> => {
    return this.db.update(id, inputs);
  }

  findMany = (query: PostQuery) : Promise<Post[]> => {
    return this.db.where(query).all();
  }
}
