model Post {
    fields {
        title Text?
        views Number?
        active Boolean?

        titlePermissionMatch Text @default("hello")
        viewsPermissionMatch Number @default(1)
        activePermissionMatch Boolean @default(true)
    }

    operations {
        create createWithText() with (title)

        create createWithNumber() with (views)

        create createWithBoolean() with (active)

        update updateTextPermission(id) with (title) {
            @permission(expression: post.title == "hello")
        }

        update updateNumberPermission(id) with (views) {
            @permission(expression: post.views == 1)
        }

        update updateBooleanPermission(id) with (active) {
            @permission(expression: post.active == true)
        }

        update updateFromFieldTextPermission(id) with (title) {
            @permission(expression: post.title == post.titlePermissionMatch)
        }

        update updateFromFieldNumberPermission(id) with (views) {
            @permission(expression: post.views == post.viewsPermissionMatch)
        }

        update updateFromFieldBooleanPermission(id) with (active) {
            @permission(expression: post.active == post.activePermissionMatch)
        }
    }
}

api Web {
    @graphql
    models {
        Post
    }
}
