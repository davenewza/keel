model Post {
    fields {
        title Text?
        subtitle Text?
        views Number? @default(10)
        isActive Boolean? @default(true)
        user Identity? 
    }

    operations {
        get getPost(id, views2: Number) { 
            //@permission(expression: post.subtitle == null)
            @permission(expression: ctx.isAuthenticated == true) 
            @permission(expression: post.views >= views2)
            @permission(expression: post.title == post.subtitle)
        }

        list listPost(views) {
            @where(post.title == "hello")
            @permission(expression: ctx.isAuthenticated) 
            @permission(expression: post.title == "hello")
        }

        create createPost() with (title, subtitle?) {
            @set(post.user = ctx.identity)
        }

    }
}

api Web {
    @graphql

    models {
        Post
    }
}

