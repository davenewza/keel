
export type {{ .Name }}Query = Partial<{
  {{ .QueryConstraints }}
}>

export class {{ .Name }}Api {
  private readonly db : Query<{{ .Name }}>;

  constructor(pool: DatabasePool) {
    this.db = new Query<{{ .Name }}>({
      tableName: '{{ .TableName }}',
      pool
    })
  }

  create = async (inputs: Partial<Omit<{{ .Name }}, "id" | "createdAt" | "updatedAt">>) : Promise<{{ .Name }}> => {
    const result = await this.db.create(inputs);
  
    console.log(result);

    return result;
  }

  where = (conditions: {{ .Name }}Query) : any => {
    return this.db.where(conditions as any);
  }

  delete = (id: string) : Promise<boolean> => {
    return this.db.delete(id);
  }

  find = (query: {{ .Name }}Query) : Promise<{{ .Name }}> => {
    return this.db.findOne(query as any);
  }

  update = (id: string, inputs: Partial<Omit<{{ .Name }}, "id" | "createdAt" | "updatedAt">>) : Promise<{{ .Name }}> => {
    return this.db.update(id, inputs as any);
  }

  findMany = (query: {{ .Name }}Query) : Promise<{{ .Name }}[]> => {
    return this.db.where(query as any).all();
  }
}