model Thing {
    fields {
        optionalText Text?
        requiredText Text @default("hello")

        optionalNumber Number?
        requiredNumber Number @default(1)

        optionalBoolean Boolean?
        requiredBoolean Boolean @default(false)

        optionalEnum ThingType?
        requiredEnum ThingType @default(ThingType.TypeOne)
    }
    operations {
        create createTextOnOptional()  {
            @set(thing.optionalText = "goodbye")
        }

        create createNullTextOnOptional()  {
            @set(thing.optionalText = null)
        }
    
        create createTextOnRequired() {
            @set(thing.requiredText = "goodbye")
        }

        create createTextFromExplicitInput() with (explText: Text) {
            @set(thing.requiredText = explText)
        }

        create createTextFromImplicitInput() with (requiredText) {
            @set(thing.optionalText = requiredText)
        }

        create createNumberOnOptional()  {
            @set(thing.optionalNumber = 5)
        }

        create createNullNumberOnOptional()  {
            @set(thing.optionalNumber = null)
        }
    
        create createNumberOnRequired() {
            @set(thing.requiredNumber = 5)
        }

        create createNumberFromExplicitInput() with (explNumber: Number) {
            @set(thing.requiredNumber = explNumber)
        }

        create createNumberFromImplicitInput() with (requiredNumber) {
            @set(thing.optionalNumber = requiredNumber)
        }
       
        create createBooleanOnOptional()  {
            @set(thing.optionalBoolean = true)
        }

        create createNullBooleanOnOptional()  {
            @set(thing.optionalBoolean = null)
        }
    
        create createBooleanOnRequired() {
            @set(thing.requiredBoolean = true)
        }

        create createBooleanFromExplicitInput() with (explBoolean: Boolean) {
            @set(thing.requiredBoolean = explBoolean)
        }

        create createBooleanFromImplicitInput() with (requiredBoolean) {
            @set(thing.optionalBoolean = requiredBoolean)
        }

        create createEnumOnOptional()  {
            @set(thing.optionalEnum = ThingType.TypeTwo)
        }

        create createNullEnumOnOptional()  {
            @set(thing.optionalEnum = null)
        }
    
        create createEnumOnRequired() {
            @set(thing.requiredEnum = ThingType.TypeTwo)
        }

        // https://linear.app/keel/issue/RUN-141/support-for-enums-as-explicit-inputs
        // create createEnumFromExplicitInput() with (explEnum: ThingType) {
        //     @set(thing.requiredEnum = explEnum)
        // }

        // https://linear.app/keel/issue/RUN-141/support-for-enums-as-explicit-inputs
        // create createEnumFromImplicitInput() with (requiredEnum) {
        //     @set(thing.optionalEnum = explEnum)
        // }
    }
}

enum ThingType {
    TypeOne
    TypeTwo
}

api Test {
    @graphql
    models {
        Thing
    }
}