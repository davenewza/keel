model Account {
    fields {
        name Text @on
    }

    actions {
        create createAccount() with (name) {
            @on(sendWelcomeMail)
        }

        update updateAccount() {
            @on(sendWelcomeMail)
            @on(verifyEmail)
            @function
        }
    }
}

job CheckAccount {
    @permission(expression: ctx.isAuthenticated)
    @on(sendWelcomeMail)
}